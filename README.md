# Sakura Flow

**Sakura Flow** 是一款基于 MCDReforged 的 Minecraft 服务器**高级待办事项（Todo）管理插件**。

Sakura Flow 旨在解决长周期、多线并行的复杂任务管理难题（如大型机器搭建、自动化流水线设计等）。通过充分利用 Minecraft 聊天栏的富文本功能，插件提供了**悬浮预览**、**点击跳转**与**指令自动填充**等交互特性，实现了高效、直观的任务管理体验。

## ✨ 核心特性

*   **游戏内管理**: 直接在聊天栏进行全流程任务管理，无需切换窗口。
*   **富文本交互**: 基于 Minecraft 聊天栏的**富文本（JSON）** 特性，支持点击按钮执行指令（完成、暂停、查看详情），操作便捷。
*   **依赖管理**: 专为复杂工程设计，支持设置任务**前置条件（Dependencies）**，自动梳理任务执行顺序。
*   **高效输入**: 提供智能指令别名系统（如 `t` 代表 `tier`），简化指令输入流程。
*   **层级可视化**: 内置动态颜色系统，根据任务等级（Tier）自动区分显示样式，直观展示任务重要性。

## 🚀 快速上手 (Quick Start)

本节介绍插件的基本工作流：

1.  **创建任务**
    示例：创建一个名为“建造刷铁机”的任务。
    `!!todo add 建造刷铁机`
2.  **查看列表**
    显示当前所有待办任务。
    `!!todo list`
    *(提示：鼠标悬浮在 `[#ID]` 上可预览任务摘要)*
3.  **追加记录**
    为任务添加详细说明或进度笔记。
    `!!todo note <ID> 需要准备 20 张床`
    *(提示：点击列表中的 `[✎]` 按钮可自动填充此指令前缀)*
4.  **标记完成**
    任务完成后，将其标记为 Done 并归档。
    `!!todo complete <ID>`
    *(提示：也可直接点击列表中的 `[✔]` 按钮)*

## 📖 指令手册

所有指令前缀为 `!!todo`。

### 1. 基础操作

| 动作     | 指令格式                   | 别称  | 说明                     |
|:-------|:-----------------------|:----|:-----------------------|
| **新建** | `!!todo add <标题>`      | `a` | 创建一个新任务。               |
| **列表** | `!!todo list`          | `l` | 显示所有**进行中**的任务（含交互按钮）。 |
| **详情** | `!!todo info <ID>`     | `i` | 查看指定任务的详细信息（依赖、笔记等）。   |
| **完成** | `!!todo complete <ID>` | -   | 标记任务为完成并移入归档。          |
| **帮助** | `!!todo help`          | -   | 显示帮助菜单。                |

### 2. 进阶管理

| 动作       | 指令格式                    | 别称   | 说明                       |
|:---------|:------------------------|:-----|:-------------------------|
| **记笔记**  | `!!todo note <ID> <内容>` | `n`  | 追加一条带有时间戳的进度记录。          |
| **暂停**   | `!!todo pause <ID>`     | -    | 挂起任务（状态变更为 On Hold）。     |
| **恢复**   | `!!todo resume <ID>`    | -    | 恢复任务（状态变更为 In Progress）。 |
| **归档库**  | `!!todo archive`        | `ar` | 查看所有已完成的历史任务。            |
| **恢复归档** | `!!todo restore <ID>`   | -    | 将已完成的任务恢复至进行中状态。         |

### 3. 属性修改 (Set/Modify)

用于修改任务的各项属性，如等级、依赖关系等。

| 操作类型      | 指令格式                          | 别称   | 说明                                |
|:----------|:------------------------------|:-----|:----------------------------------|
| **修改单值**  | `!!todo set <ID> <属性> <值>`    | `s`  | 修改标题、等级、优先级等单值属性。                 |
| **添加列表项** | `!!todo append <ID> <属性> <值>` | `ap` | 向列表属性（如依赖 `dep`、协作者 `collab`）追加值。 |
| **移除列表项** | `!!todo remove <ID> <属性> <值>` | `rm` | 从列表属性中移除指定值。                      |

> **说明**: 
> *   **Tier (等级)**: 支持 `0-14` 的整数。数值越大，任务在列表中的显示颜色越醒目。
> *   **Dependencies (依赖)**: 使用 `!!todo ap <ID> dep <前置ID>` 添加依赖关系。

## 🖱️ 交互界面指南

插件在聊天栏提供以下交互元素：

*   **列表视图**:
    *   `[#ID]`: **悬浮**查看摘要，**点击**自动填充 `info` 指令。
    *   `[▶] / [⏸]`: **点击**切换 暂停/进行中 状态。
    *   `[✔]`: **点击**直接完成任务。
    *   `[✎]`: **点击**自动填充 `note` 指令。
*   **详情视图**:
    *   **依赖链**: 点击依赖任务的 ID 可跳转查看该前置任务的详情。

## 📦 安装说明

1.  确保服务端已安装 [MCDReforged](https://github.com/MCDReforged/MCDReforged)。
2.  下载本插件，将文件夹放入 `plugins` 目录。
3.  在控制台或游戏内输入 `!!MCDR plugin reload` 重载插件。

## 📝 附录：属性字段速查

在执行 `set`, `append`, `remove` 时可用的属性名及其简写：

| 属性全名            | 简写            | 类型    | 说明                    |
|:----------------|:--------------|:------|:----------------------|
| `title`         | -             | 文本    | 任务标题                  |
| `description`   | `desc`        | 文本    | 详细描述                  |
| `tier`          | `t`           | 数字    | 任务等级 (0-14)           |
| `priority`      | `p`, `prio`   | 文本/数字 | 优先级 (High, Medium...) |
| `dependencies`  | `d`, `dep`    | 列表    | **前置任务 ID**           |
| `collaborators` | `c`, `collab` | 列表    | 协作者玩家名                |
| `labels`        | `l`, `label`  | 列表    | 自定义标签                 |
