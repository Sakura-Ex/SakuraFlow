# Sakura Flow

一款专注于**依赖管理**与**深度交互**的 MCDReforged 待办事项插件。
Sakura Flow 旨在解决长周期、多线并行的复杂任务管理难题，提供极简的输入体验和类似 IDE 的聊天栏交互界面。

## ✨ 核心特性

* **极简输入**: 减少繁琐打字，支持字段别称（如 `t` 代表 `tier`），让指令输入如行云流水。
* **深度交互**: 充分利用 Minecraft 聊天栏富文本（RText），将聊天栏打造为交互式“控制面板”。支持悬浮预览详情、点击执行指令。
* **流程管理**: 专为复杂任务链设计，强调任务的**前置依赖（Dependencies）**管理，自动梳理任务执行顺序。
* **层级可视化**: 内置动态颜色系统，根据任务等级（Tier）显示不同颜色，直观区分任务重要性或阶段。
* **协作管理**: 支持多玩家协作，记录任务创建者与协作者。
* **自然排序**: 依赖项 ID 自动按数值排序，协作者和标签按字典序排序。

## 🛠️ 指令系统

所有指令前缀为 `!!todo`。

### 任务创建

| 指令                   | 别称         | 说明       |
|:---------------------|:-----------|:---------|
| `!!todo add <title>` | `!!todo a` | 创建一个新任务。 |

### 查询与管理

| 指令                 | 别称          | 说明                         |
|:-------------------|:------------|:---------------------------|
| `!!todo list`      | `!!todo l`  | 显示当前所有 **未完成** 的任务（含交互按钮）。 |
| `!!todo archive`   | `!!todo ar` | 显示所有 **已完工** 的历史任务。        |
| `!!todo info <id>` | `!!todo i`  | 查看任务详情，支持依赖项悬浮预览和跳转。       |
| `!!todo help`      | -           | 显示帮助菜单。                    |

### 快捷操作

| 指令                        | 别称         | 说明                          |
|:--------------------------|:-----------|:----------------------------|
| `!!todo note <id> <text>` | `!!todo n` | 追加带有时间戳和作者的任务进度记录。          |
| `!!todo complete <id>`    | -          | 一键标记为 **Done** 并移入归档。       |
| `!!todo pause <id>`       | -          | 状态切换为 **On Hold**，暂停项目。     |
| `!!todo resume <id>`      | -          | 状态切换为 **In Progress**，恢复项目。 |
| `!!todo restore <id>`     | -          | 从归档中恢复任务至 **In Progress**。  |

### 属性修改

| 指令                                  | 别称          | 说明                                                        |
|:------------------------------------|:------------|:----------------------------------------------------------|
| `!!todo set <id> <prop> <value>`    | `!!todo s`  | 修改单值属性（如 title, tier, priority）。<br>Tier 支持数字输入，用于区分任务等级。 |
| `!!todo append <id> <list> <value>` | `!!todo ap` | 向列表属性（dep, collab, label）追加项。<br>追加依赖时会检查 ID 是否存在。        |
| `!!todo remove <id> <list> <value>` | `!!todo rm` | 从列表属性中移除特定项。                                              |

## 🖥️ 交互界面

插件在聊天栏提供丰富的交互元素：

* **列表视图**:
    * `[#ID]`: 悬浮显示详情，点击填充查询指令。
    * `[▶/⏸]`: 点击快捷切换 暂停/进行中 状态。
    * `[✔]`: 点击一键完成任务。
    * `[✎]`: 点击快捷填充笔记指令。
* **详情视图**:
    * **等级颜色**: 根据 Tier 等级显示对应颜色，高等级任务会有更醒目的高亮显示。
    * **依赖链**: 依赖项以 `[#ID]` 展示，支持悬浮预览状态，点击跳转。

## 📦 安装说明

1. 确保已安装 [MCDReforged](https://github.com/MCDReforged/MCDReforged)。
2. 将本插件文件夹放入 `plugins` 目录。
3. 在 MCDR 中重载插件。

## 📝 字段说明

### 单值属性 (Set)

| 属性名           | 别称          | 说明   | 合法值示例                                      |
|:--------------|:------------|:-----|:-------------------------------------------|
| `title`       | `title`     | 任务名称 | 任意文本                                       |
| `description` | `desc`      | 详细描述 | 任意文本                                       |
| `status`      | `stat`, `s` | 任务状态 | `In Progress`, `On Hold`, `Done`           |
| `tier`        | `t`         | 任务等级 | `0`-`14` (数字越大颜色越醒目)                       |
| `priority`    | `prio`, `p` | 优先级  | `0`-`4` 或 `Very High`, `High`, `Medium`... |

### 列表属性 (Append/Remove)

| 属性名             | 别称            | 说明                  |
|:----------------|:--------------|:--------------------|
| `collaborators` | `collab`, `c` | 协作者列表               |
| `dependencies`  | `dep`, `d`    | 前置任务 ID 列表 (自动数值排序) |
| `labels`        | `label`, `l`  | 标签列表                |
